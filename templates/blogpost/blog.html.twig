{% extends 'base.html.twig' %}

{% block title %}Blogpost index{% endblock %}

{% block body %}
    <div class="jumbotron_blog p-4 p-md-5 text-white rounded bg-dark">
        <div class="col-md-6 px-0">
            <h1 class="display-4 font-italic">Bienvenue sur le blog de CampiGarden </h1>
            <p class="lead my-3">Profitez des dernières actualitées pour prifiter des vacances en plein air et du camping chez l'habitant</p>
        </div>
    </div>
    <main role="main" class="container">
        <div class="row">
            <div class="col-md-8 blog-main">
                <h3 class="pb-4 mb-4 font-italic border-bottom">
                    From the Firehose
                </h3>

                <div class="blog-post">
                    <h2 class="blog-post-title">Important</h2>
                    {% for blogpost in blogpost_important %}

                            <h4>{{ blogpost.title }}</h4>
                            <p>{{ blogpost.content | slice(0, 300)}}...<a href="{{ path('blogpost_show', {'id': blogpost.id}) }}">Voir plus</a></p>
                            {% for image in blogpost.images %}
                                {% for image in blogpost.images %}
                                    <div>
                                        <img src="{{ asset('/uploads/'~image.name) }}" alt="" width="100%">
                                    </div>
                                {% endfor %}
                            {% endfor %}
                            <small class="text-muted">Crée le {{ blogpost.createdAt ? blogpost.createdAt|date('Y-m-d') : '' }}</small>
                            <small class="text-muted">Catégorie {{ blogpost.category}}</small>

                    {% endfor %}
                </div>
                <br>
                <div class="blog-post">
                    <h2 class="blog-post-title">Articles récents</h2>
                    {% for blogpost in blogposts |slice(0,5) %}
                        <div class="col-md-12">
                            <div class="card mb-4 shadow-sm">
                                <div class="card-body">
                                    {% for image in blogpost.images %}
                                        {% for image in blogpost.images %}
                                            <div>
                                                <img src="{{ asset('/uploads/'~image.name) }}" alt="" width="100%">
                                            </div>
                                        {% endfor %}
                                    {% endfor %}
                                    <p class="card-title">{{ blogpost.title }}</p>
                                    <p class="card-text">{{ blogpost.content | slice(0, 100)}}</p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="btn-group">
                                            <a class="btn btn-sm btn-outline-secondary" href="{{ path('blogpost_show', {'id': blogpost.id}) }}">Voir l'article</a>
                                        </div>
                                        <small class="text-muted">Crée le {{ blogpost.createdAt ? blogpost.createdAt|date('Y-m-d') : '' }}</small>
                                        <small class="text-muted">Catégorie {{ blogpost.category}}</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div><!-- /.blog-main -->

            <aside class="col-md-4 blog-sidebar">
                <div class="p-4 mb-3 bg-light rounded">
                    <h4 class="font-italic">A propos</h4>
                    <p class="mb-0">CampinGarden à pour objectif de mettre en relation les campeurs et les hôtes avec une réservation en ligne. Afin de voyager en toute sécurité, nous nous efforçons de vous tenir informé des dernières actualités.</p>
                </div>
                <div class="p-4">
                    <h4 class="font-italic">Catégories</h4>
                    <ol class="list-unstyled mb-0">
                        <li><a href="#">Législation</a></li>
                        <li><a href="#">Sanitaire</a></li>
                        <li><a href="#">Astuce</a></li>
                        <li><a href="#">Voyager</a></li>
                    </ol>
                </div>
            </aside>
        </div>

    </main>
{% endblock %}
